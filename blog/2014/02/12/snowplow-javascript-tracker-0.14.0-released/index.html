<!DOCTYPE html>
<html>
<head>
	
	<title>Snowplow JavaScript Tracker 0.14.0 released with new features - Snowplow Analytics</title>
	

	<link rel="icon" type="image/x-icon" href="/favicon.ico" />

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="description" content="" />
	<link href="/static/css/styles.css" type="text/css" rel="stylesheet" />
	<link href="/static/css/pygments.css" type="text/css" rel="stylesheet" />
	
	<!--For the homepage slider-->
	<link rel="stylesheet" href="/static/css/nivo-slider.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="/static/css/nivo-slider-theme-default.css" type="text/css" media="screen" />
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
	<script src="/static/js/jquery-nivo-slider-pack.js" type="text/javascript" ></script>
	<!--MathJax http://www.mathjax.org/-->
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_HTMLorMML.js"></script>
	<script type="text/javascript">
		MathJax.Hub.Config({
	      tex2jax: {
	        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
	      }
	    });
	    MathJax.Hub.Queue(function() {
	        var all = MathJax.Hub.getAllJax(), i;
	        for(i=0; i < all.length; i += 1) {
	            all[i].SourceElement().parentNode.className += ' has-jax';
	        }
    	});
	</script>
	<!-- end mathjax -->
	<!-- typekit -->
	<script type="text/javascript" src="//use.typekit.net/noo1diw.js"></script>
	<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<!-- end typekit -->
</head>
<body>
	<!-- Google Tag Manager -->
	<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-DLRG"
	height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-DLRG');</script>
	<!-- End Google Tag Manager -->
	<div id="universe">
		<div id="container">
			<div id="header" class="span-24">
  <div id="logo">
    <h1><a href="/"><img src="/static/img/snowplow-logo-website.png" title="Snowplow Analytics" /></a></h1>
  </div>
  <div id="menu" class="span-15">
    <ul>
      <li ><a href="/product/index.html">Product</a></li>
      <li ><a href="/services/index.html">Services</a></li>
      <li ><a href="/analytics/index.html">Analytics</a></li>
      <li ><a href="/technology/index.html">Technology</a></li>
      <li  class="active" ><a href="/blog.html">Blog</a></li>
      <li ><a id="mail" href="/about/index.html">About</a></li>
    </ul>
  </div>
</div>
	
			<div id="contents">
		<div class="post">
			12 Feb 2014
			<h1>Snowplow JavaScript Tracker 0.14.0 released with new features</h1>
			 <span class="author">Author: <a href="/fred.html" rel="author">Fred Blundun </a></span>
			<p><em>Alex writes: this is the first blog post - and code release - by Snowplow &#8220;springtern&#8221; Fred Blundun. Stay tuned for another blog post soon introducing Fred!</em></p>

<p>We are pleased to announce the release of the <a href='https://github.com/snowplow/snowplow-javascript-tracker/releases/tag/0.14.0'>Snowplow JavaScript Tracker version 0.14.0</a>.</p>

<p>In this release we have introduced some new tracking options and compressed our tracker for better load times. We have also updated our build process to use <a href='[http://gruntjs.com/'>Grunt</a>.</p>

<p>This blog post will cover the following changes:</p>

<ol>
<li><a href='/blog/2014/02/12/snowplow-javascript-tracker-0.14.0-released/#gzipping'>New feature: gzipping</a></li>

<li><a href='/blog/2014/02/12/snowplow-javascript-tracker-0.14.0-released/#cookie'>New feature: set user ID from a cookie</a></li>

<li><a href='/blog/2014/02/12/snowplow-javascript-tracker-0.14.0-released/#querystring'>New feature: set user ID from a querystring</a></li>

<li><a href='/blog/2014/02/12/snowplow-javascript-tracker-0.14.0-released/#iframe'>New feature: pass a referrer through an iframe</a></li>

<li><a href='/blog/2014/02/12/snowplow-javascript-tracker-0.14.0-released/#donottrack'>New feature: respecting Do Not Track</a></li>

<li><a href='/blog/2014/02/12/snowplow-javascript-tracker-0.14.0-released/#grunt'>New build process</a></li>

<li><a href='/blog/2014/02/12/snowplow-javascript-tracker-0.14.0-released/#structure'>Other structural improvements</a></li>

<li><a href='/blog/2014/02/12/snowplow-javascript-tracker-0.14.0-released/#gzipping'>Upgrading</a></li>

<li><a href='/blog/2014/02/12/snowplow-javascript-tracker-0.14.0-released/#gzipping'>Getting help</a></li>
</ol>
<!--more--><h2><a name='gzipping'>1. New feature: gzipping</a></h2>
<p>Our hosted JavaScript JavaScript Tracker is now gzipped for CloudFront delivery using a Grunt plugin. This decreases the file size by about 70%, improving load times and perceived website speed. All modern browsers support gzipping (<a href='http://webmasters.stackexchange.com/questions/22217/which-browsers-handle-content-encoding-gzip-and-which-of-them-has-any-special'>reference</a>).</p>
<h2><a name='cookie'>2. New feature: set user ID from a cookie</a></h2>
<p>This new function allows you to set the visitor&#8217;s business user ID to the value of a first-party cookie. Its signature is:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>function</span> <span class='nx'>setUserIdFromCookie</span><span class='p'>(</span><span class='nx'>cookieName</span><span class='p'>);</span>
</code></pre></div>
<p>For example, this code:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>_snaq</span><span class='p'>.</span><span class='nx'>push</span><span class='p'>([</span><span class='s1'>&#39;setUserIdFromCookie&#39;</span><span class='p'>,</span> <span class='s1'>&#39;_sp_id.4209&#39;</span><span class='p'>]);</span>
</code></pre></div>
<p>will look for a cookie whose name is &#8220;_sp_id.4209&#8221;. If one is found, the user ID will be set to the value of that cookie.</p>
<h2><a name='querystring'>3. New feature: set user ID from a querystring</a></h2>
<p>We have added support for setting the visitor&#8217;s business user ID from a field in the querystring of either the current page&#8217;s URL or the referring page&#8217;s URL. The signatures for the new functions are:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>function</span> <span class='nx'>setUserIdFromLocation</span><span class='p'>(</span><span class='nx'>querystringField</span><span class='p'>);</span>
<span class='kd'>function</span> <span class='nx'>setUserIdFromReferrer</span><span class='p'>(</span><span class='nx'>querystringField</span><span class='p'>);</span>
</code></pre></div>
<p>For example, to set the user&#8217;s ID to the value of the &#8220;id&#8221; field in the local querystring, use:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>_snaq</span><span class='p'>.</span><span class='nx'>push</span><span class='p'>([[</span><span class='s1'>&#39;setUserIdFromLocation&#39;</span><span class='p'>,</span> <span class='s1'>&#39;id&#39;</span><span class='p'>]]);</span>
</code></pre></div>
<p>And to set it to the value of the &#8220;id&#8221; field in the referrer querystring, use:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>_snaq</span><span class='p'>.</span><span class='nx'>push</span><span class='p'>([[</span><span class='s1'>&#39;setUserIdFromReferrer&#39;</span><span class='p'>,</span> <span class='s1'>&#39;id&#39;</span><span class='p'>]]);</span>
</code></pre></div><h2><a name='iframe'>4. New feature: pass a referrer through an iframe</a></h2>
<p>You can now pass the referrer back to Snowplow from inside an iframe. To do this, set <code>referrer=x</code> in the querystring of the iframe&#8217;s URL, where &#8216;x&#8217; is the required referrer. This also works if you set <code>referer=x</code> (with one &#8216;r&#8217;).</p>

<p>Many thanks to community member <a href='https://github.com/joshspivey'>Josh Spivey</a> for this idea and some suggested code!</p>
<h2><a name='donottrack'>5. New feature: respecting Do Not Track</a></h2>
<p>Most browsers offer a Do Not Track feature, allowing users to request not to be tracked by websites. You can now respect that preference with:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>function</span> <span class='nx'>respectDoNotTrack</span><span class='p'>(</span><span class='nx'>enable</span><span class='p'>);</span>
</code></pre></div>
<p>Use this function like so:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>_snaq</span><span class='p'>.</span><span class='nx'>push</span><span class='p'>([</span><span class='s1'>&#39;respectDoNotTrack&#39;</span><span class='p'>,</span> <span class='kc'>true</span><span class='p'>]);</span> 
</code></pre></div>
<p>If the browser&#8217;s Do Not Track feature is enabled, the above code will prevent the Snowplow JavaScript Tracker from either setting first-party cookies or sending events to a collector.</p>
<h2><a name='grunt'>6. Switched to Grunt-based build process</a></h2>
<p>We have replaced our custom <code>snowpak.sh</code> Bash script with a standardised <a href='[http://gruntjs.com/'>Grunt</a> file. This let us use Grunt plugins to automate the build process, from file concatentation and YUI Compression through to uploading to S3 and CloudFront invalidation.</p>

<p>It should also help us move to a more modular project structure and add a test suite in the <a href='https://github.com/snowplow/snowplow-javascript-tracker/issues?milestone=4&amp;page=1&amp;state=open'>next release</a>.</p>
<h2><a name='structure'>7. Other structural improvements</a></h2>
<p>We have also:</p>

<ul>
<li>Moved cookie-related functionality into a new file <a href='https://github.com/snowplow/snowplow-javascript-tracker/issues/77'>(#77)</a></li>

<li>Moved requestStringBuilder into a new file <a href='https://github.com/snowplow/snowplow-javascript-tracker/issues/55'>(#55)</a></li>

<li>Moved functions to detect browser attributes into a new file <a href='https://github.com/snowplow/snowplow-javascript-tracker/issues/37'>(#37)</a></li>

<li>Removed getLegacyCookieName <a href='https://github.com/snowplow/snowplow-javascript-tracker/issues/50'>(#50)</a></li>

<li>Removed the legacy Piwik debug code <a href='https://github.com/snowplow/snowplow-javascript-tracker/issues/65'>(#65)</a></li>
</ul>
<h2><a name='upgrading'>8. Upgrading </a></h2>
<p>The upgraded minified tracker is available here:</p>

<pre><code>http(s)://d1fc8wv8zag5ca.cloudfront.net/0.14.0/sp.js</code></pre>

<p>If you are currently using the path:</p>

<pre><code>http(s)://d1fc8wv8zag5ca.cloudfront.net/0/sp.js</code></pre>

<p>then you will get the new version automatically.</p>
<h2><a name='help'>9. Getting help </a></h2>
<p>Check out the <a href='https://github.com/snowplow/snowplow-javascript-tracker/releases/tag/0.14.0'>v0.14.0 release page</a> on GitHub for the full list of changes made in this version.</p>

<p>As always, if you run into any issues or don&#8217;t understand any of the above changes, please <a href='https://github.com/snowplow/snowplow/issues'>raise an issue</a> or get in touch with us via <a href='https://github.com/snowplow/snowplow/wiki/Talk-to-us'>the usual channels</a>.</p>
			<div class="author_summary">
				<h2>About the author</h2>
				<div class="author_image"><img src="https://plus.google.com/s2/photos/profile/113917031846021461080" /></div> <div class="author_spiel">
  <a href="/fred.html">Fred</a> is an intern at Snowplow Analytics. You can find him on <a href="https://plus.google.com/u/0/113917031846021461080" rel="author">Google+</a> and <a href="http://uk.linkedin.com/in/fredblundun">LinkedIn</a>
</div>

			</div> 
			<div id="comments">
	<h2>Questions? Comments? Join the debate!</h2>
	 <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'snowplow'; // required: replace example with your forum shortname
            /* var disqus_identifier =  ; // unique ID so that disqus fetches the correct comments for each post
            var disqus_url =  ;
            var disqus_title =  ; */

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
		</div>
		<p>Return to the <a href="/blog.html">main blog page</a></p>
		

</div>

<div id="sidebar">
	<h1>Recent posts</h1>
	<ul>
		
			<li><a href="/blog/2014/02/12/snowplow-javascript-tracker-0.14.0-released">Snowplow JavaScript Tracker 0.14.0 released with new features</a></li>
		
			<li><a href="/blog/2014/02/04/snowplow-0.9.0-released-with-beta-kinesis-support">Snowplow 0.9.0 released with beta Amazon Kinesis support</a></li>
		
			<li><a href="/blog/2014/01/30/inaugural-amazon-kinesis-meetup">Inaugural meetup of the Amazon Kinesis - London User Group</a></li>
		
			<li><a href="/blog/2014/01/27/snowplow-javascript-tracker-0.13.0-released-with-custom-contexts">Snowplow JavaScript Tracker 0.13.0 released with custom contexts</a></li>
		
			<li><a href="/blog/2014/01/27/snowplow-custom-contexts-guide">A guide to custom contexts in Snowplow JavaScript Tracker 0.13.0</a></li>
		
	</ul>

	
		<h1>Other</h1>
		<ul>
		
			
				<li><a href="/blog/2014/01/30/inaugural-amazon-kinesis-meetup">Inaugural meetup of the Amazon Kinesis - London User Group</a></li>
			
				<li><a href="/blog/2014/01/21/snowplow-team-in-nyc-and-boston-in-feb-2014">The Snowplow team will be in New York and Boston in February - get in touch if you'd like to meet</a></li>
			
				<li><a href="/blog/2013/12/04/snowplow-at-the-graduate-data-science-initiative">The first Graduate Data Science Initiative event in London</a></li>
			
				<li><a href="/blog/2013/11/11/round-up-and-thank-you-for-the-budapest-bi-conference-last-week">A round up of our trip to the Budapest BI Conference last week, and a thank you to the many people who made the trip so worthwhile</a></li>
			
				<li><a href="/blog/2013/10/28/yali-and-alex-introduce-snowplow-to-code-n">Our video introduction of Snowplow to code_n</a></li>
			
		
		</ul>		
	
		<h1>Releases</h1>
		<ul>
		
			
				<li><a href="/blog/2014/02/12/snowplow-javascript-tracker-0.14.0-released">Snowplow JavaScript Tracker 0.14.0 released with new features</a></li>
			
				<li><a href="/blog/2014/02/04/snowplow-0.9.0-released-with-beta-kinesis-support">Snowplow 0.9.0 released with beta Amazon Kinesis support</a></li>
			
				<li><a href="/blog/2014/01/27/snowplow-javascript-tracker-0.13.0-released-with-custom-contexts">Snowplow JavaScript Tracker 0.13.0 released with custom contexts</a></li>
			
				<li><a href="/blog/2014/01/27/snowplow-custom-contexts-guide">A guide to custom contexts in Snowplow JavaScript Tracker 0.13.0</a></li>
			
				<li><a href="/blog/2014/01/17/scala-forex-library-released">Scala Forex library by wintern Jiawen Zhou released</a></li>
			
		
		</ul>		
	
		<h1>Analytics</h1>
		<ul>
		
			
				<li><a href="/blog/2013/12/10/introducing-looker-a-fresh-approach-to-bi-on-snowplow-data">Introducing Looker - a fresh approach to Business Intelligence that works beautifully with Snowplow</a></li>
			
				<li><a href="/blog/2013/11/19/quickstart-guide-to-using-sql-with-snowplow-data-published">Quick start guide to learning SQL to query Snowplow data published</a></li>
			
				<li><a href="/blog/2013/10/28/call-for-data-this-winter">Call for data! Support us develop experimental analyses. Have us help you answer your toughest business questions.</a></li>
			
				<li><a href="/blog/2013/10/22/cohort-analysis-with-using-new-sql-recipes-and-chartio">Using the new SQL views to perform cohort analysis with ChartIO</a></li>
			
				<li><a href="/blog/2013/09/03/using-qubole-to-analyze-snowplow-web-data">Using Qubole to crunch your Snowplow web data using Apache Hive</a></li>
			
		
		</ul>		
	
		<h1>Inside the Plow</h1>
		<ul>
		
			
				<li><a href="/blog/2014/01/15/amazon-kinesis-tutorial-getting-started-guide">Amazon Kinesis tutorial - a getting started guide</a></li>
			
				<li><a href="/blog/2013/11/20/loading-json-data-into-redshift">Loading JSON data into Redshift - the challenges of quering JSON data, and how Snowplow can be used to meet those challenges</a></li>
			
				<li><a href="/blog/2013/09/27/how-much-does-snowplow-cost-to-run">How much does Snowplow cost to run, vs the competition?</a></li>
			
				<li><a href="/blog/2013/07/09/understanding-how-different-parts-of-the-Snowplow-data-pipeline-drive-AWS-costs">Unpicking the Snowplow data pipeline and how it drives AWS costs</a></li>
			
				<li><a href="/blog/2013/05/30/dealing-with-hadoops-small-files-problem">Dealing with Hadoop's small files problem</a></li>
			
		
		</ul>		
	
		<h1>Research</h1>
		<ul>
		
			
				<li><a href="/blog/2014/01/20/the-three-eras-of-business-data-processing">The three eras of business data processing</a></li>
			
				<li><a href="/blog/2013/10/21/scripting-hadoop-part-1-adventures-with-scala-rhino-and-javascript">Scripting Hadoop, Part One - Adventures with Scala, Rhino and JavaScript</a></li>
			
				<li><a href="/blog/2013/08/12/towards-universal-event-analytics-building-an-event-grammar">Towards universal event analytics - building an event grammar</a></li>
			
		
		</ul>		
	
		<h1>Recruitment</h1>
		<ul>
		
			
				<li><a href="/blog/2013/12/20/introducing-our-snowplow-winterns">Introducing our Snowplow winterns</a></li>
			
				<li><a href="/blog/2013/10/07/announcing-our-winter-open-source-internship-program">Announcing our winter open source internship program</a></li>
			
		
		</ul>		
	

	<h1>Useful links</h1>
	<ul>
		<li><a href="/blog/atom.xml">Atom feed</a></li>
	</ul>
	<!--<strong>Tags</strong> -->
</div>

			<div id="footer">
	<p>Copyright © Snowplow Analytics Limited 2012 - 2014.  All rights reserved</p>
</div>
		</div>
	</div>
		<!-- Following Javascript function used by Disqus to count the number of comments for each blog post and display in the main index -->
	  	<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'snowplow'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        </script>
        <!-- begin olark code -->
		<script data-cfasync="false" type='text/javascript'>/*<![CDATA[*/window.olark||(function(c){var f=window,d=document,l=f.location.protocol=="https:"?"https:":"http:",z=c.name,r="load";var nt=function(){
		f[z]=function(){
		(a.s=a.s||[]).push(arguments)};var a=f[z]._={
		},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){
		f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={
		0:+new Date};a.P=function(u){
		a.p[u]=new Date-a.p[0]};function s(){
		a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){
		hd="head";return["<",hd,"></",hd,"><",i,' onl' + 'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){
		return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){
		b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{
		b.contentWindow[g].open()}catch(w){
		c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{
		var t=b.contentWindow[g];t.write(p());t.close()}catch(x){
		b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({
		loader: "static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});
		/* custom configuration goes here (www.olark.com/documentation) */
		olark.identify('9752-503-10-5227');/*]]>*/</script><noscript><a href="https://www.olark.com/site/9752-503-10-5227/contact" title="Contact us" target="_blank">Questions? Feedback?</a> powered by <a href="http://www.olark.com?welcome" title="Olark live chat software">Olark live chat software</a></noscript>
		<!-- end olark code -->
		<!-- Track Olark chats in GTM (so can pass data onto Snowplow) -->
		<script type="text/javascript">
		olark('api.chat.onMessageToOperator', function(event) {
		    dataLayer.push({'event': 'olarkMessageToOperator'});
		});
		olark('api.chat.onMessageToVisitor', function(event) {
		    dataLayer.push({'event': 'olarkMessageToVisitor'});
		});
		</script>
		<!-- end track olark code -->


</body>
</html>